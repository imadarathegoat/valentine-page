<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>For You â¤ï¸</title>
    <link rel="stylesheet" href="style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
    />
  </head>
  <body>
    <div class="container" onclick="next()">
      <div class="image-container">
        <img id="memoryImage" src="images/1.jpg" alt="Us" decoding="async" />
      </div>

      <h1 id="title">Na Kanmani ğŸ’•</h1>
      <p id="text">Donâ€™t be shyâ€¦ tap me ğŸ˜˜</p>

      <div class="buttons hidden" id="buttons">
        <button class="yes" onclick="yes(event)">
          <i class="fa-solid fa-heart"></i> Yes
        </button>
        <button class="no" id="no" onclick="moveNo(event)">No ğŸ˜…</button>
      </div>
    </div>

    <script>
      const name = "Ammu";

      const steps = [
        {
          title: `Hey ${name} ğŸ’•`,
          text: "Okayâ€¦ so I made this just for you",
        },
        {
          title: "Iâ€™m a little nervous ğŸ˜…",
          text: "Not gonna lie, my heartâ€™s kinda racing",
        },
        {
          title: "But I wanted to say this",
          text: "Because I keep thinking about you",
        },
        {
          title: "Youâ€™re kinda special",
          text: "The kind that makes ordinary days better",
        },
        {
          title: "You do this thing",
          text: "Where you make me smile without even trying ğŸ¥¹",
        },
        {
          title: "So Iâ€™ve been wonderingâ€¦",
          text: "What this could be if we tried",
        },
        {
          title: "No big speech ğŸ˜Œ",
          text: "Just one honest question",
        },
        {
          title: "Will you be my Valentine? ğŸ’˜",
          text: "",
        },
      ];

      const images = [
        "images/1.jpg",
        "images/2.jpg",
        "images/3.jpg",
        "images/4.jpg",
        "images/5.jpg",
        "images/6.jpg",
        "images/7.jpg",
        "images/heart-final.jpg",
      ];

      const preloadedImages = [];

      images.forEach((src) => {
        const img = new Image();
        img.src = src;
        preloadedImages.push(img);
      });

      const noMessages = [
        "WAIT ğŸ˜³",
        "Are you sure??",
        "That was a misclick ğŸ˜…",
        "Try again ğŸ’€",
        "You didnâ€™t mean that",
        "My heart ğŸ’”",
        "Okay now youâ€™re playing",
        "This button is broken",
      ];

      let step = 0;
      let noCount = 0;

      document.getElementById("memoryImage").src = images[0];

      function next() {
        if (step < steps.length - 1) {
          step++;

          document.getElementById("title").innerText = steps[step].title;
          document.getElementById("text").innerText = steps[step].text;

          const imageEl = document.getElementById("memoryImage");
          const img = preloadedImages[step];

          img.decode().then(() => {
            imageEl.src = img.src;
          });

          if (step === steps.length - 1) {
            document.getElementById("buttons").classList.remove("hidden");
          }
        }
      }

      function yes(e) {
        e.stopPropagation();
        document.body.innerHTML = `
    <div class="container">
      <h1>Wellâ€¦ this just got better ğŸ˜ŒğŸ’˜</h1>
      <p>You just made me really happy, ${name} ğŸ¥¹</p>
      <img src="images/heart-final.jpg" class="final-image" alt="Heart">

      <!-- Hearts container -->
      <div class="hearts"></div>
    </div>
  `;

        setTimeout(() => {
          const heartsContainer = document.querySelector(".hearts");

          setInterval(() => {
            const heart = document.createElement("div");
            heart.classList.add("heart");
            heart.innerText = "â¤ï¸";
            heart.style.left = Math.random() * 100 + "vw";
            heart.style.fontSize = 12 + Math.random() * 24 + "px";
            heartsContainer.appendChild(heart);

            setTimeout(() => heart.remove(), 5000);
          }, 200);
        }, 50);
      }

      function moveNo(e) {
        e.stopPropagation();

        const btn = document.getElementById("no");
        btn.innerText = noMessages[noCount % noMessages.length];
        noCount++;

        btn.style.position = "absolute";
        btn.style.left = Math.random() * 70 + "vw";
        btn.style.top = Math.random() * 70 + "vh";
      }

      function createHearts() {
        const heartsContainer = document.querySelector(".hearts");

        for (let i = 0; i < 30; i++) {
          const heart = document.createElement("div");
          heart.classList.add("heart");
          heart.style.left = Math.random() * 90 + "vw";
          heart.style.animationDelay = Math.random() * 2 + "s";
          heart.style.fontSize = 12 + Math.random() * 18 + "px";
          heartsContainer.appendChild(heart);

          setTimeout(() => heart.remove(), 5000);
        }
      }
    </script>
  </body>
</html>
